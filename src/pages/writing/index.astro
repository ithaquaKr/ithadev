---
import Container from "@components/Container.astro";
import { WRITING } from "@consts";
import Layout from "@layouts/Layout.astro";
import { getAllPosts } from "@lib/utils";

const allPosts = await getAllPosts();
---

<Layout title={WRITING.TITLE} description={WRITING.DESCRIPTION}>
	<Container>
		<div class="space-y-10">
			<!-- All Posts -->
			<section class="animate space-y-2">
				<div class="flex items-center justify-between">
					<p class="text-[#8C8A88] dark:text-gray-400">
						All Posts
					</p>
				</div>
				<ul class="space-y-0 tabular-nums">
					{allPosts.map((post) => (
						<li>
							<a
								href={post.data.externalUrl}
								target="_blank"
								rel="noopener noreferrer"
								class="group flex items-baseline gap-3 py-1 hover:text-[#588285] transition-colors dark:hover:text-[#6B9B9E]"
							>
								<span class="text-[#8C8A88] text-sm shrink-0 dark:text-gray-500">
									{post.data.date.getFullYear()} · {String(post.data.date.getMonth() + 1).padStart(2, '0')}
								</span>
								<span class="text-[#2C2A28] group-hover:underline decoration-[#588285] underline-offset-2 dark:text-white dark:decoration-[#6B9B9E]">
									{post.data.title}<span class="text-[#8C8A88]"> ↗</span>
								</span>
							</a>
						</li>
					))}
				</ul>
			</section>
		</div>
	</Container>
</Layout>
